# Starter pipeline

# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- main

pool:
  vmImage: windows-2019

steps:
- task: AzurePowerShell@5
  inputs:
    azureSubscription: 'Demo Account'
    ScriptType: 'InlineScript'
    Inline: |
      Get-Module -ListAvailable
      Install-Module -Name Az.PostgresSql -Scope CurrentUser -Repository PSGallery -Force
    preferredAzurePowerShellVersion: '6.4.0'
- task: AzurePowerShell@5
  inputs:
    azureSubscription: 'Demo Account'
    ScriptType: 'InlineScript'
    Inline: |
      import-module az;
      Update-AzPostgreSqlServer -Name TBD -ResourceGroupName TBD -ReplicationRole None;
    preferredAzurePowerShellVersion: '6.4.0'
